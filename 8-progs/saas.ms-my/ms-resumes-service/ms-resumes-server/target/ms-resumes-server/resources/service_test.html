<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>接口测试(自动)</title>
<meta charset="UTF-8">
<meta name="Generator" content="EditPlus">
<meta name="Author" content="">
<meta name="Keywords" content="">
<meta name="Description" content="">
</head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery_extend.js"></script>
<script type="text/javascript">
$(document).ready(function() {

	/* 加载入参 */
	loadParameterInput = function() {
		$.post(
			$("#loadUrl").val(), 
			{
			    serviceName : $("#serviceName").val(),
			    methodName : $("#methodName").val()
		    }, 
		    function(data, status) {
		        $("#paramterInput").val(data);
	        }
	    );
	};

	getBean = function(){
		jQuery.getJSON(
	        $("#getBeanUrl").val(), 
	        {
	        	serviceNameLike : $("#serviceNameLike").val()
	        },
	        function(data) {
	            var serviceNames = JSON.parse(JSON.stringify(data));
	            $("#serviceName").find("option").remove();
	            for ( var i in serviceNames) {
	                var name = serviceNames[i];
	                $("#serviceName").append("<option value= " + name + ">" + name + "</option>");
	            }
	            getMethodName();
	        }
	    )
	};
	
	getMethodName = function() {
		jQuery.getJSON(
		    $("#getMethodUrl").val(), 
		    {
		    	serviceName : $("#serviceName").val()
		    }, 
		    function(data) {
					var methodNames = JSON.parse(JSON.stringify(data));
					$("#methodName").find("option").remove();
					for ( var i in methodNames) {
						var name = methodNames[i];
						$("#methodName").append("<option value= " + name + ">" + name + "</option>");
					}
					loadParameterInput();
				}
	    )
	};
    $("#loadBeanBtn").click(function() {
    	$("#serviceName").find("option").remove();
    	getBean();
    });
	   
    /* 点击提交 */
    $("#submitBtn").click(function() {
        $.post(
            $("#serviceUrl").val(), 
            {
                serviceName : $("#serviceName").val(),
                methodName : $("#methodName").val(),
                paramterInput : $("#paramterInput").val()
            }, 
            function(data, status) {
             $("#invokeOnput").val(data);
            }
        );
    });

    getBean();
});
</script>
<body>
	<div class="title">Auto Service Test <a href="service_test_manual.html" id="go">手动输入</a></div>
	<div class="main">
		<table width=100% border=1 cellpadding="5" cellspacing="0" bordercolorlight="#cccccc" bordercolordark="#FFFFFF">
			<tr>
				<td width=10%>Service Name</td>
				<td width=45%>
					<select id="serviceNameLike" onchange="getBean();" style="width: 48%; height: 100%">
					   <option>ExportService</option>
					   <option>FacadeService</option>
					   <option>BizService</option>
					   <option>ThirdService</option>
					   <option>CacheService</option>
					   <option>Service</option>
					</select>
					<select id="serviceName" onchange="getMethodName();" style="width: 50%; height: 100%"></select>
				</td>
				<td width=45% rowspan="2" align="center">Output</td>
			</tr>
			<tr>
				<td>Method Name</td>
				<td>
				    <select id="methodName" style="width: 100%; height: 100%" onchange="loadParameterInput();"></select>
				</td>
			</tr>
			<tr>
				<td>Paramter Input<br>(JSON) </td>
				<td height=450px>
				    <textarea id="paramterInput" row="100" style="width: 100%; height: 100%"></textarea>
				</td>
				<td height=450px width=40%>
				    <textarea id="invokeOnput" row="100" style="width: 100%; height: 100%"></textarea>
				</td>
			</tr>
			<tr>
				<td align="center" colspan=3>
					<input type="hidden" id="getBeanUrl" style="width: 80%; height: 100%" value="../getBean"> 
					<input type="hidden" id="serviceUrl" style="width: 80%; height: 100%" value="../service"> 
					<input type="hidden" id="getMethodUrl" style="width: 80%; height: 100%" value="../getMethod"> 
					<input type="hidden" id="loadUrl" style="width: 80%; height: 100%" value="../load"> 
					<input type="button" value=" 提交 " id="submitBtn"> 
				</td>
			</tr>
		</table>
	</div>
</body>
</html>
